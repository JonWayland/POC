<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" href="../images/sand_dollar_favicon_64.png" sizes="64x64" type="image/png">
  <title>Invoice Generator | The Dollar Web</title>
  <!-- jsPDF and html2canvas -->
  <script src="libs/jspdf.umd.min.js"></script>
  <script src="libs/html2canvas.min.js"></script>
  <style>
    /* === FONTS & ROOT VARS === */
    @font-face {
      font-family: 'Inter';
      font-style: normal;
      font-weight: 400;
      src: url('/fonts/inter-regular.woff2') format('woff2');
    }
    @font-face {
      font-family: 'Inter';
      font-style: normal;
      font-weight: 500;
      src: url('/fonts/inter-medium.woff2') format('woff2');
    }
    @font-face {
      font-family: 'Inter';
      font-style: normal;
      font-weight: 600;
      src: url('/fonts/inter-semibold.woff2') format('woff2');
    }
    @font-face {
      font-family: 'Montserrat';
      font-style: normal;
      src: url('/fonts/Montserrat-VariableFont_wght.ttf') format('truetype-variations');
      font-weight: 100 900;
      font-display: swap;
    }
    @font-face {
      font-family: 'Montserrat';
      font-style: italic;
      src: url('/fonts/Montserrat-Italic-VariableFont_wght.ttf') format('truetype-variations');
      font-weight: 100 900;
      font-display: swap;
    }

    :root {
      --primary: #00a896;
      --secondary: #f8b500;
      --accent: #ff6b6b;
      --light: #f8f9fa;
      --dark: #05668d;
      --text: #333;
      --bg: #f5f9f8;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 20px;
      background: var(--bg);
      color: var(--text);
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' opacity='0.03' viewBox='0 0 120 120'%3E%3Cpath d='M20,60 C20,60 35,30 60,30 C85,30 100,60 100,60 C100,60 85,90 60,90 C35,90 20,60 20,60 Z' fill='%2300a896'/%3E%3C/svg%3E");
      background-size: 120px;
      min-height: 100vh;
      padding-bottom: 40px;
      /* space for fixed navbar */
      padding-top: 70px;
    }

    /* === UNIVERSAL NAVBAR FROM index.html === */
    .main-nav {
      background: white;
      box-shadow: 0 2px 15px rgba(0,0,0,0.08);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
    }
    .nav-logo {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: var(--primary);
      font-weight: 600;
      font-size: 1.5rem;
      transition: all 0.2s;
    }
    .nav-logo:hover {
      transform: translateY(-2px);
    }
    .nav-logo svg {
      margin-right: 10px;
    }
    .nav-links {
      display: flex;
      align-items: center;
      gap: 30px;
    }
    .nav-links a {
      color: var(--dark);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }
    .nav-links a:hover {
      color: var(--primary);
    }
    .login-btn {
      background: var(--primary);
      color: white !important;
      padding: 10px 20px;
      border-radius: 8px;
      transition: all 0.2s !important;
    }
    .login-btn:hover {
      background: var(--dark);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    @media (max-width: 768px) {
      .nav-links { gap: 15px; }
      .nav-logo span { font-size: 1.2rem; }
    }
    @media (max-width: 576px) {
      .nav-links a:not(.login-btn) { display: none; }
    }
    .secondary-text { color: var(--secondary); }
    .tertiary-text  { color: var(--dark); }
    /* === END NAVBAR === */

    /* === EXISTING INVOICE PAGE STYLES === */
    .content-wrapper {
      padding-top: 100px;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding-left: 20px;
      padding-right: 20px;
    }
    h1 { 
      text-align: center; 
      margin-bottom: 30px;
      color: var(--primary);
      font-weight: 600;
      font-size: 1.8rem;
    }
    .container { 
      display: flex; 
      gap: 25px;
      flex-wrap: wrap;
    }
    .controls, .preview { 
      background: #fff; 
      padding: 30px; 
      border-radius: 16px; 
      flex: 1;
      min-width: 320px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.08);
      position: relative;
      overflow: hidden;
    }

    /* Modern decorative elements */
    .controls::before,
    .preview::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
    }
    
    .controls::after {
      content: '';
      position: absolute;
      bottom: -80px;
      right: -80px;
      width: 200px;
      height: 200px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' width='100' height='100' opacity='0.05'%3E%3Cpath d='M10,90 C10,90 10,60 40,60 C70,60 90,30 90,10 C90,10 70,30 50,30 C30,30 10,60 10,90 Z' fill='%2300a896'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-size: contain;
      z-index: 0;
    }
    
    .section-title {
      font-weight: 600;
      margin-bottom: 15px;
      color: var(--dark);
      font-size: 1.1rem;
      border-bottom: 1px solid #eee;
      padding-bottom: 8px;
    }
    
    .controls label { 
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--dark);
      position: relative;
      z-index: 1;
    }
    
    .controls input,
    .controls textarea,
    .controls button { 
      width: 100%;
      margin-bottom: 18px;
      padding: 12px;
      border: 1px solid #e0e0e0;
      border-radius: 10px;
      font-family: inherit;
      font-size: 1rem;
      position: relative;
      z-index: 1;
      transition: all 0.3s;
    }
    
    .controls textarea {
      min-height: 80px;
      resize: vertical;
    }
    
    .controls input:focus,
    .controls textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 168, 150, 0.1);
    }
    
    .controls table { 
      width: 100%; 
      border-collapse: collapse; 
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
    }
    
    .controls th, 
    .controls td { 
      border: 1px solid #eee; 
      padding: 12px; 
      text-align: left;
    }
    
    .controls th {
      background: rgba(0, 168, 150, 0.05);
      color: var(--dark);
      font-weight: 500;
    }
    
    .controls .add-row { 
      background: var(--primary); 
      color: #fff; 
      cursor: pointer;
      border: none;
      font-weight: 500;
      transition: all 0.3s;
    }
    
    .controls .add-row:hover {
      background: var(--dark);
      transform: translateY(-3px);
      box-shadow: 0 8px 15px rgba(0,0,0,0.1);
    }
    
    .controls .remove-row { 
      background: var(--accent); 
      color: #fff; 
      cursor: pointer;
      border: none;
      padding: 6px 10px;
      border-radius: 6px;
      transition: all 0.2s;
      font-size: 1rem;
      line-height: 1;
    }
    
    .controls .remove-row:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .controls td input {
      margin-bottom: 0;
      width: 100%;
    }
    
    .preview { 
      position: relative;
      padding: 0;
    }
    
    .invoice { 
      width: 100%;
      padding: 40px; 
      border: 1px solid #eee; 
      margin: auto; 
      background: #fff;
      position: relative;
      z-index: 1;
    }
    
    /* For PDF rendering */
    .pdf-container {
      width: 8.5in;
      background: white;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      margin: 0;
      padding: 0.75in;
      box-sizing: border-box;
    }
    
    .invoice-header { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      margin-bottom: 30px;
      border-bottom: 2px solid var(--secondary);
      padding-bottom: 20px;
    }
    
    .logo-container {
      width: 180px; 
      height: 90px;
    }
    
    #logo-drop { 
      width: 100%;
      height: 100%;
      border: 2px dashed #ccc; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      color: #aaa; 
      cursor: pointer; 
      background-size: contain; 
      background-repeat: no-repeat; 
      background-position: center;
      transition: all 0.3s;
      border-radius: 10px;
    }
    
    #logo-drop:hover {
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.05);
    }
    
    .company-info { 
      text-align: right;
    }

    #preview-company-address {
      white-space: pre-line;
      margin-bottom: 5px;
    }
    
    .customer-info {
      margin-bottom: 25px;
      border: 1px solid #f0f0f0;
      border-radius: 10px;
      padding: 15px;
      background: #fafafa;
    }
    
    .customer-info h3 {
      margin-bottom: 10px;
      color: var(--dark);
      font-size: 1rem;
    }

    /* Improved Add Row Button */
    .add-row {
      background: var(--primary);
      color: #fff;
      cursor: pointer;
      border: none;
      font-weight: 500;
      transition: all 0.3s;
      padding: 12px 20px;
      border-radius: 10px;
      width: auto !important; /* Override the 100% width */
      display: inline-block;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0, 168, 150, 0.2);
    }

    .add-row:hover {
      background: var(--dark);
      transform: translateY(-3px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
    }

    .add-row-container {
      display: flex;
      justify-content: flex-start; /* Align to the left */
      margin-top: 5px;
    }
    
    .service-lines { 
      width: 100%; 
      border-collapse: collapse; 
      margin-bottom: 30px;
    }
    
    .service-lines th, 
    .service-lines td { 
      border: 1px solid #eee; 
      padding: 12px;
    }
    
    .service-lines th {
      background: rgba(0, 168, 150, 0.05);
      color: var(--dark);
      font-weight: 500;
    }
    
    .totals { 
      text-align: right; 
      font-size: 1.2em;
      margin-top: 20px;
      border-top: 2px solid var(--secondary);
      padding-top: 20px;
    }
    
    .invoice-footer {
      margin-top: 40px;
      font-size: 0.9em;
      color: #777;
      text-align: center;
      border-top: 1px solid #eee;
      padding-top: 20px;
    }
    
    .dollaweb-branding {
      text-align: center;
      margin-top: 35px;
      font-size: 0.8em;
      color: #aaa;
      border-top: 1px dashed #eee;
      padding-top: 15px;
    }
    
    .dollaweb-branding a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    
    /* Styling for the invoice number and date */
    .invoice-meta {
      margin-bottom: 25px;
      display: flex;
      justify-content: space-between;
    }
    
    .invoice-meta div {
      background: #f9f9f9;
      padding: 10px 15px;
      border-radius: 8px;
    }
    
    .invoice-meta span {
      font-weight: 500;
      color: var(--dark);
      margin-right: 8px;
    }
    
    /* Status messages */
    #status-message {
      position: fixed;
      top: 70px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 168, 150, 0.9);
      color: white;
      padding: 12px 24px;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 1000;
      display: none;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }
      
      .invoice {
        padding: 20px;
      }
    }

    /* Preserve line breaks and wrapping in the address preview */
    #preview-customer-address {
      white-space: pre-line;
    }

    .download-buttons {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .download-buttons button {
      background: var(--dark);
      color: white;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .download-buttons button:hover {
      background: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .download-buttons button:active {
      transform: translateY(1px);
      box-shadow: 0 2px 3px rgba(0,0,0,0.2);
      background: #038e7e; /* Slightly darker than primary */
    }

    .sequence-input-container {
      display: flex;
      margin-bottom: 18px;
    }

    .sequence-input-container input {
      flex: 1;
      margin-bottom: 0;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    .sequence-input-container button {
      width: 40px;
      background: var(--primary);
      color: white;
      border: none;
      border-top-right-radius: 10px;
      border-bottom-right-radius: 10px;
      cursor: pointer;
      font-size: 18px;
      transition: all 0.3s;
    }

    .sequence-input-container button:hover {
      background: var(--dark);
    }

    .invoice-note {
      font-size: 0.75em;
      color: #777;
      margin-top: 5px;
      margin-bottom: 15px;
    }

    /* Secondary Nav Styles */
    .secondary-nav {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      position: sticky;
      top: 60px;
      z-index: 900;
      margin-bottom: 30px;
    }

    .form-tabs {
      display: flex;
      justify-content: center;
      padding: 12px 0;
      gap: 10px;
    }

    .tab-btn {
      background: transparent;
      border: none;
      padding: 8px 16px;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.3s;
      font-weight: 500;
      color: var(--dark);
    }

    .tab-btn:hover {
      background: rgba(0, 168, 150, 0.1);
      color: var(--primary);
    }

    .tab-btn.active {
      background: var(--primary);
      color: white;
    }

    /* Two-column layout */
    .two-column-layout {
      display: flex;
      gap: 30px;
      margin-bottom: 50px;
    }

    .input-column {
      flex: 1;
      min-width: 0; /* Allow column to shrink below content width */
    }

    .preview-column {
      flex: 1;
      min-width: 0; /* Allow column to shrink below content width */
    }

    /* Make preview sticky when scrolling */
    .preview-sticky {
      position: sticky;
      top: 120px; /* Positioned below the secondary nav */
    }

    /* Updated Content Layout */
    .content-wrapper {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px 100px 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      padding-top: 20px;
      color: var(--primary);
      font-weight: 600;
      font-size: 1.8rem;
    }

    .preview-title {
      margin: 0 0 20px;
      color: var(--dark);
      font-weight: 500;
      font-size: 1.4rem;
    }

    /* Form Panels */
    .form-panels {
      background: white;
      padding: 30px;
      border-radius: 16px;
      margin-bottom: 30px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.08);
      position: relative;
      overflow: hidden;
    }

    .form-panels::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
    }

    .form-panel {
      display: none;
    }

    .form-panel.active {
      display: block;
    }

    .form-panel label, 
    .form-panel input, 
    .form-panel textarea, 
    .form-panel button,
    .form-panel table {
      width: 100%;
      margin-bottom: 18px;
    }

    .form-panel label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--dark);
    }

    .form-panel input,
    .form-panel textarea {
      padding: 12px;
      border: 1px solid #e0e0e0;
      border-radius: 10px;
      font-family: inherit;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .form-panel textarea {
      min-height: 80px;
      resize: vertical;
    }

    .form-panel input:focus,
    .form-panel textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 168, 150, 0.1);
    }

    /* Action Buttons */
    .action-buttons {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
    }

    .download-buttons {
      display: flex;
      gap: 12px;
    }

    .download-buttons button {
      background: var(--dark);
      color: white;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .download-buttons button:hover {
      background: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    /* Invoice styling */
    .invoice {
      width: 100%;
      padding: 40px;
      border: 1px solid #eee;
      background: #fff;
      box-shadow: 0 5px 25px rgba(0,0,0,0.1);
    }

    /* Improved Add Row Button */
    .add-row {
      background: var(--primary);
      color: #fff;
      cursor: pointer;
      border: none;
      font-weight: 500;
      transition: all 0.3s;
      padding: 12px 20px;
      border-radius: 10px;
      width: auto !important; /* Override the 100% width */
      display: inline-block;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0, 168, 150, 0.2);
    }

    .add-row:hover {
      background: var(--dark);
      transform: translateY(-3px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
    }

    .add-row-container {
      display: flex;
      justify-content: flex-start; /* Align to the left */
      margin-top: 5px;
    }

    /* Invoice sequence input */
    .sequence-input-container {
      display: flex;
      margin-bottom: 18px;
    }

    .sequence-input-container input {
      flex: 1;
      margin-bottom: 0;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    .sequence-input-container button {
      width: 40px;
      background: var(--primary);
      color: white;
      border: none;
      border-top-right-radius: 10px;
      border-bottom-right-radius: 10px;
      cursor: pointer;
      font-size: 18px;
      transition: all 0.3s;
      margin-bottom: 0;
    }

    .sequence-input-container button:hover {
      background: var(--dark);
    }

    .invoice-note {
      font-size: 0.75em;
      color: #777;
      margin-top: -10px;
      margin-bottom: 15px;
    }

    /* Responsive adjustments */
    @media (max-width: 1024px) {
      /* Stack columns on tablets and below */
      .two-column-layout {
        flex-direction: column;
      }
      
      /* Remove sticky behavior on smaller screens */
      .preview-sticky {
        position: static;
      }
    }

    @media (max-width: 768px) {
      .form-tabs {
        flex-wrap: wrap;
      }
      
      .invoice {
        padding: 20px;
      }
    }

    /* Secondary Navigation Styles (only affects the secondary-nav) */
    .secondary-nav {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      position: sticky;
      top: 60px;
      z-index: 900;
      margin-bottom: 30px;
    }

    .secondary-nav .nav-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px 0 10px 0;
      /* Keep main nav container styles intact by using more specific selector here */
    }

    .nav-title {
      font-size: 1.6rem;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 15px;
    }

    .form-tabs {
      display: flex;
      justify-content: center;
      padding: 0 0 5px 0;
      gap: 10px;
      width: 100%;
    }

    /* Adjust the sticky position of the preview to account for taller nav */
    .preview-sticky {
      position: sticky;
      top: 140px;
    }

    /* Responsive adjustments for the secondary nav */
    @media (max-width: 768px) {
      .secondary-nav .nav-container {
        padding: 10px 0;
      }
      
      .nav-title {
        font-size: 1.4rem;
        margin-bottom: 10px;
      }
      
      .form-tabs {
        flex-wrap: wrap;
      }
    }

    /* Footer Styles */
    .site-footer {
      background: var(--dark);
      padding: 40px 0 50px;
      margin-top: 80px;
      position: relative;
      color: white;
    }

    .footer-wave {
      position: absolute;
      top: -120px;
      left: 0;
      right: 0;
      height: 120px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120' width='1200' height='120' opacity='0.1'%3E%3Cpath d='M0,100 C200,20 400,60 600,80 C800,100 1000,40 1200,120 L1200,120 L0,120 Z' fill='%23ffffff'/%3E%3C/svg%3E");
      background-repeat: repeat-x;
      background-position: bottom;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .footer-logo {
      display: flex;
      align-items: center;
      margin-bottom: 40px;
      color: var(--secondary);
    }

    .footer-logo svg {
      width: 48px;
      height: 48px;
      margin-right: 16px;
    }

    .footer-logo span {
      font-weight: 600;
      font-size: 2.4rem;
    }

    .footer-links {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 40px;
    }

    .footer-links a {
      color: var(--light);
      text-decoration: none;
      margin: 0 30px;
      font-size: 1.8rem;
      transition: color 0.2s;
    }

    .footer-links a:hover {
      color: var(--secondary);
    }

    .footer-social {
      display: flex;
      gap: 30px;
      margin-bottom: 40px;
    }

    .footer-social a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 72px;
      height: 72px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      transition: all 0.2s;
    }

    .footer-social a svg {
      width: 40px;
      height: 40px;
    }

    .footer-social a:hover {
      background: var(--secondary);
      color: var(--dark);
      transform: translateY(-3px);
    }

    .copyright {
      font-size: 1.8rem;
      color: rgba(255, 255, 255, 0.7);
    }

    .copyright-message {
      font-size: 1.2rem;
      color: rgba(255, 255, 255, 0.7);
    }

    @media (max-width: 768px) {
      .footer-links {
        flex-direction: column;
        gap: 20px;
      }
      
      .footer-links a {
        margin: 10px 0;
      }
    }

  </style>
</head>
<body>
  <!-- UNIVERSAL NAVBAR -->
  <nav class="main-nav">
    <div class="nav-container">
      <a href="../index.html" class="nav-logo">
        <img src="../images/logo.svg" alt="The Dollar Web Logo" style="width: 32px; height: 32px;">
        <span class="tertiary-text">&nbsp;The&nbsp;</span>Dollar&nbsp;<span class="secondary-text">Web</span>
      </a>
      <div class="nav-links">
        <a href="../index.html">Home</a>
        <a href="../tools.html">Tools</a>
        <a href="../about.html">About</a>
        <a href="../login.html" class="login-btn">Login</a>
      </div>
    </div>
  </nav>

  <!-- After the main-nav, add this secondary nav -->
  <nav class="secondary-nav">
    <div class="nav-container">
      <div class="nav-title">Invoice Generator</div>
      <div class="form-tabs">
        <button class="tab-btn active" data-tab="company-details">Company Details</button>
        <button class="tab-btn" data-tab="customer-details">Customer Details</button>
        <button class="tab-btn" data-tab="invoice-details">Invoice Details</button>
        <button class="tab-btn" data-tab="custom-options">Custom Options</button>
      </div>
    </div>
  </nav>
  
  <div class="content-wrapper">    
    <!-- Two-column layout container -->
    <div class="two-column-layout">
      <!-- Left column for form inputs -->
      <div class="input-column">
        <!-- Form Panels -->
        <div class="form-panels">
          <!-- Company Details Panel -->
          <div class="form-panel active" id="company-details-panel">
            <div class="section-title">Your Company Details</div>
            <label>Company Name</label>
            <input type="text" id="input-company" placeholder="Your Company Inc." />
  
            <label>Company Email</label>
            <input type="email" id="input-email" placeholder="contact@yourcompany.com" />
            
            <label>Company Address</label>
            <textarea id="input-company-address" placeholder="Your company address"></textarea>
            
            <label>Upload Logo (optional)</label>
            <input type="file" id="logo-input" accept="image/*" />
          </div>
          
          <!-- Customer Details Panel -->
          <div class="form-panel" id="customer-details-panel">
            <div class="section-title">Customer Details</div>
            <label>Customer Name</label>
            <input type="text" id="input-customer-name" placeholder="Customer Name (Optional)" />
            
            <label>Customer Address</label>
            <textarea id="input-customer-address" placeholder="Customer Address (Optional)"></textarea>
            
            <label>Customer Email</label>
            <input type="email" id="input-customer-email" placeholder="customer@example.com (Optional)" />
          </div>
          
          <!-- Invoice Details Panel -->
          <div class="form-panel" id="invoice-details-panel">
            <div class="section-title">Invoice Details</div>
            <label>Date</label>
            <input type="date" id="input-date" />
            
            <label>Invoice Sequence Number</label>
            <div class="sequence-input-container">
              <input type="number" id="input-sequence-number" min="1" max="999" value="001" step="1">
              <button id="increment-sequence" title="Increment Sequence Number">+</button>
            </div>
            <div class="invoice-note">Note: For sequential invoicing, increment the last 3 digits for multiple invoices created on the same date.</div>
  
            <label>Service Lines</label>
            <table id="lines-table">
              <thead>
                <tr><th>Description</th><th>Amount ($)</th><th></th></tr>
              </thead>
              <tbody></tbody>
            </table>
            <div class="add-row-container">
              <button class="add-row">+ Add Service Item</button>
            </div>
          </div>
          
          <!-- Custom Options Panel -->
          <div class="form-panel" id="custom-options-panel">
            <div class="section-title">Custom Options</div>
            <label>Footer Message</label>
            <textarea id="input-footer" placeholder="Custom footer message (Optional)">Thank you for your business! Payment is due within 30 days.</textarea>
          </div>
        </div>
        
        <!-- Action Buttons below the form panels -->
        <div class="action-buttons">
          <div class="download-buttons">
            <button id="btn-png">Download PNG</button>
            <button id="btn-pdf">Download PDF</button>
          </div>
        </div>
      </div>
      
      <!-- Right column for preview -->
      <div class="preview-column">
        <div class="preview-sticky">
          <div class="invoice" id="invoice">
            <!-- Invoice content remains the same -->
            <div class="invoice-header">
              <div class="logo-container">
                <div id="logo-drop">Drop Logo Here</div>
              </div>
              <div class="company-info">
                <div id="preview-company" style="font-size:1.5em;font-weight:600;">Your Company Inc.</div>
                <div id="preview-company-address"></div>
                <div id="preview-email">contact@yourcompany.com</div>
              </div>
            </div>
            
            <div class="invoice-meta">
              <div><span>Invoice:</span> <span id="preview-invoice-number">INV-25042</span></div>
              <div><span>Date:</span> <span id="preview-date">April 18, 2025</span></div>
            </div>
            
            <div class="customer-info" id="customer-info">
              <h3>Billed To:</h3>
              <div id="preview-customer-name"></div>
              <div id="preview-customer-address"></div>
              <div id="preview-customer-email"></div>
            </div>
            
            <table class="service-lines" id="preview-lines">
              <thead>
                <tr><th>Description</th><th>Amount ($)</th></tr>
              </thead>
              <tbody></tbody>
            </table>
            
            <div class="totals">
              Total: $<span id="preview-total">0.00</span>
            </div>
            
            <div class="invoice-footer" id="preview-footer">
              Thank you for your business! Payment is due within 30 days.
            </div>
            
            <!-- DollarWeb branding - always present, not customizable -->
            <div class="dollaweb-branding">
              Created with <a href="https://thedollarweb.com">The Dollar Web</a> Invoice Template
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Status message -->
  <div id="status-message"></div>

  <script>
    // Utilities
    const $ = sel => document.querySelector(sel);
    const createCell = (tag, text='') => { let el = document.createElement(tag); el.textContent = text; return el; };

    // Set today's date as default
    const today = new Date();
    const formattedDate = today.toISOString().split('T')[0];
    $('#input-date').value = formattedDate;
    $('#preview-date').textContent = today.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric'});

    // State
    let lines = [];
    let hasLogo = false;
    
    // Status message display
    function showStatus(message, duration = 3000) {
      const statusEl = $('#status-message');
      statusEl.textContent = message;
      statusEl.style.display = 'block';
      setTimeout(() => { statusEl.style.opacity = 1; }, 10);
      
      setTimeout(() => {
        statusEl.style.opacity = 0;
        setTimeout(() => { statusEl.style.display = 'none'; }, 300);
      }, duration);
    }
    
    // Function to generate a sequential invoice number
    function generateInvoiceNumber() {
      // Get company name (first 3 letters)
      const companyPart = $('#input-company').value.trim() ? 
        $('#input-company').value.trim().replace(/[^A-Z0-9]/gi, '').substring(0, 3).toUpperCase() : 
        'INV';
      
      // Get current date in YYYYMMDD format
      const today = new Date();
      const year = today.getFullYear();
      const month = (today.getMonth() + 1).toString().padStart(2, '0');
      const day = today.getDate().toString().padStart(2, '0');
      const datePart = `${year}${month}${day}`;
      
      // Use the custom sequence number (pad to 3 digits)
      const sequentialPart = inputSequenceNumber.value.toString().padStart(3, '0');
      
      return `${companyPart}-${datePart}${sequentialPart}`;
    }

    // Function to add the invoice note
    function addInvoiceNote() {
      // Create the note element right after the sequence input container
      const invoiceNoteDiv = document.createElement('div');
      invoiceNoteDiv.className = 'invoice-note';
      invoiceNoteDiv.textContent = 'Note: For sequential invoicing, increment the last 3 digits for multiple invoices created on the same date.';
      
      // Insert after the sequence input container
      const sequenceContainer = inputSequenceNumber.parentNode;
      sequenceContainer.parentNode.insertBefore(invoiceNoteDiv, sequenceContainer.nextSibling);
    }

    // DOM elements
    const tableBody = $('#lines-table tbody');
    const previewLines = $('#preview-lines tbody');
    const previewTotal = $('#preview-total');
    const inputCompany = $('#input-company');
    const inputCompanyAddress = $('#input-company-address');
    const inputEmail = $('#input-email');
    const previewCompany = $('#preview-company');
    const previewCompanyAddress = $('#preview-company-address');
    const previewEmail = $('#preview-email');
    const previewInvoiceNumber = $('#preview-invoice-number');
    const inputDate = $('#input-date');
    const inputSequenceNumber = $('#input-sequence-number');
    const incrementSequenceBtn = $('#increment-sequence');
    const previewDate = $('#preview-date');
    const inputCustomerName = $('#input-customer-name');
    const inputCustomerAddress = $('#input-customer-address');
    const inputCustomerEmail = $('#input-customer-email');
    const previewCustomerName = $('#preview-customer-name');
    const previewCustomerAddress = $('#preview-customer-address');
    const previewCustomerEmail = $('#preview-customer-email');
    const inputFooter = $('#input-footer');
    const previewFooter = $('#preview-footer');
    const customerInfo = $('#customer-info');
    const logoDrop = $('#logo-drop');
    const logoInput = $('#logo-input');
    // Tab navigation functionality
    const tabButtons = document.querySelectorAll('.tab-btn');
    const formPanels = document.querySelectorAll('.form-panel');

    function activateTab(tabId) {
      // Deactivate all tabs
      tabButtons.forEach(btn => btn.classList.remove('active'));
      formPanels.forEach(panel => panel.classList.remove('active'));
      
      // Activate the selected tab
      document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
      document.getElementById(`${tabId}-panel`).classList.add('active');
    }

    // Call this function once to initialize the addInvoiceNote
    // since the note is now part of the HTML structure
    function initializeLayout() {
      // Remove the old addInvoiceNote function call if it exists
      // It's now part of the static HTML
    }

    // Add a new service line
    function addLine(desc='', amt='0.00') {
      const idx = lines.length;
      lines.push({ desc, amt: parseFloat(amt) });

      // Controls row
      const tr = document.createElement('tr');
      const tdDesc = document.createElement('td'), tdAmt = document.createElement('td'), tdRm = document.createElement('td');
      const inpDesc = document.createElement('input');
      inpDesc.value = desc;
      inpDesc.placeholder = 'Service description';
      inpDesc.oninput = () => { 
        lines[idx].desc = inpDesc.value; 
        renderPreview();
        updateInvoiceNumber();
      };
      const inpAmt = document.createElement('input');
      inpAmt.type = 'number'; inpAmt.step = '0.01'; inpAmt.value = amt;
      inpAmt.placeholder = '0.00';
      inpAmt.oninput = () => { 
        lines[idx].amt = parseFloat(inpAmt.value)||0; 
        renderPreview();
        updateInvoiceNumber();
      };
      const btnRm = document.createElement('button');
      btnRm.textContent = 'â€“';
      btnRm.className = 'remove-row';
      btnRm.onclick = () => { 
        lines.splice(idx,1); 
        rebuildLines(); 
        renderPreview();
        updateInvoiceNumber();
      };

      tdDesc.appendChild(inpDesc);
      tdAmt.appendChild(inpAmt);
      tdRm.appendChild(btnRm);
      tr.append(tdDesc, tdAmt, tdRm);
      tableBody.appendChild(tr);

      renderPreview();
    }

    // Rebuild controls table (after remove)
    function rebuildLines() {
      tableBody.innerHTML = '';
      const old = [...lines];
      lines = [];
      old.forEach(l => addLine(l.desc, l.amt.toFixed(2)));
    }

    // Render preview panel
    function renderPreview() {
      previewLines.innerHTML = '';
      let total = 0;
      lines.forEach(l => {
        const tr = document.createElement('tr');
        tr.append(createCell('td', l.desc), createCell('td', l.amt.toFixed(2)));
        previewLines.appendChild(tr);
        total += l.amt;
      });
      previewTotal.textContent = total.toFixed(2);
      
      // Update customer info visibility
      if (inputCustomerName.value || inputCustomerAddress.value || inputCustomerEmail.value) {
        customerInfo.style.display = 'block';
      } else {
        customerInfo.style.display = 'none';
      }
    }
    
    // Update the invoice number based on details
    function updateInvoiceNumber() {
      previewInvoiceNumber.textContent = generateInvoiceNumber();
    }
    
    // Set up logo handling
    function handleLogoUpload(file) {
      if (!file || !file.type.startsWith('image/')) return;
      
      // Check file size (limit to 1MB to be safe for localStorage)
      if (file.size > 1048576) { // 1MB in bytes
        showStatus('Logo too large. Please use an image under 1MB.', 5000);
        return;
      }
      
      const reader = new FileReader();
      reader.onload = ev => {
        const logoDataUrl = ev.target.result;
        logoDrop.style.backgroundImage = `url(${logoDataUrl})`;
        logoDrop.textContent = '';
        hasLogo = true;
        
        // Save to localStorage
        saveLogoToLocalStorage(logoDataUrl);
      };
      reader.readAsDataURL(file);
    }

    // Add a right-click context menu to clear the logo
    logoDrop.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      if (hasLogo) {
        if (confirm('Do you want to remove this logo?')) {
          clearLogo();
        }
      }
      return false;
    });

    // Logo drag & drop in preview
    logoDrop.addEventListener('dragover', e => { e.preventDefault(); logoDrop.style.borderColor='var(--primary)'; });
    logoDrop.addEventListener('dragleave', e => { e.preventDefault(); logoDrop.style.borderColor='#ccc'; });
    logoDrop.addEventListener('drop', e => {
      e.preventDefault();
      logoDrop.style.borderColor='#ccc';
      const file = e.dataTransfer.files[0];
      handleLogoUpload(file);
    });

    // Click to select logo in preview
    logoDrop.addEventListener('click', () => {
      logoInput.click();
    });
    
    // File input change
    logoInput.addEventListener('change', e => {
      const file = e.target.files[0];
      handleLogoUpload(file);
    });

    inputSequenceNumber.addEventListener('input', function() {
      // Ensure value is between 1-999
      let value = parseInt(this.value);
      if (isNaN(value) || value < 1) {
        value = 1;
      } else if (value > 999) {
        value = 999;
      }
      
      // Format as 3 digits
      this.value = value.toString().padStart(3, '0');
      
      // Update the invoice number
      updateInvoiceNumber();
      
      // Save to localStorage
      saveCompanyDetailsToLocalStorage();
    });

    incrementSequenceBtn.addEventListener('click', function() {
      let value = parseInt(inputSequenceNumber.value);
      if (isNaN(value) || value < 1) {
        value = 0;
      }
      
      // Increment and handle wrapping around to 001 if over 999
      value = (value % 999) + 1;
      
      // Format as 3 digits
      inputSequenceNumber.value = value.toString().padStart(3, '0');
      
      // Update the invoice number
      updateInvoiceNumber();
      
      // Save to localStorage
      saveCompanyDetailsToLocalStorage();
    });

    // Bind inputs
    inputCompany.oninput = () => { 
      previewCompany.textContent = inputCompany.value || 'Your Company Inc.'; 
      updateInvoiceNumber();
      saveCompanyDetailsToLocalStorage();
    };

    inputCompanyAddress.oninput = () => {
      // Use innerHTML instead of textContent to preserve line breaks
      previewCompanyAddress.innerHTML = inputCompanyAddress.value.replace(/\n/g, '<br>');
      saveCompanyDetailsToLocalStorage();
    };

    inputEmail.oninput = () => { 
      previewEmail.textContent = inputEmail.value || 'contact@yourcompany.com'; 
      saveCompanyDetailsToLocalStorage();
    };
    inputDate.onchange = () => { 
      const d = new Date(inputDate.value);
      previewDate.textContent = d.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric'});
      updateInvoiceNumber();
    };
    inputCustomerName.oninput = () => {
      previewCustomerName.textContent = inputCustomerName.value;
      renderPreview();
      updateInvoiceNumber();
    };
    inputCustomerAddress.oninput = () => {
      // Use innerHTML instead of textContent to preserve line breaks
      previewCustomerAddress.innerHTML = inputCustomerAddress.value.replace(/\n/g, '<br>');
      renderPreview();
    };
    // Ensure the Enter key works in the company address textarea
    inputCompanyAddress.addEventListener('keydown', (e) => {
      // Allow Enter key to create a new line (don't submit the form)
      if (e.key === 'Enter') {
        // Don't prevent default - we want the normal behavior of Enter in a textarea
      }
    });
    // Ensure the Enter key works in the customer address textarea
    inputCustomerAddress.addEventListener('keydown', (e) => {
      // Allow Enter key to create a new line (don't submit the form)
      if (e.key === 'Enter') {
        // Don't prevent default - we want the normal behavior of Enter in a textarea
      }
    });
    inputCustomerEmail.oninput = () => {
      previewCustomerEmail.textContent = inputCustomerEmail.value;
      renderPreview();
    };
    inputFooter.oninput = () => {
      previewFooter.textContent = inputFooter.value || 'Thank you for your business! Payment is due within 30 days.';
    };

    // Create a properly formatted invoice for PDF output
    function createPdfInvoice() {
      // Create container div with proper dimensions
      const pdfContainer = document.createElement('div');
      pdfContainer.className = 'pdf-container';
      
      // Clone the invoice content
      const invoiceContent = $('#invoice').cloneNode(true);
      
      // If no logo, remove the logo placeholder
      // Handle logo container for PDF
      const logoElement = invoiceContent.querySelector('#logo-drop');
      if (!hasLogo) {
        // If no logo, remove the placeholder completely
        logoElement.textContent = '';
        logoElement.style.border = 'none';
      } else {
        // If logo exists, keep the logo but remove the dashed border
        logoElement.style.border = 'none';
      }
      
      // Ensure address line breaks are preserved in the PDF
      const addressElement = invoiceContent.querySelector('#preview-customer-address');
      if (addressElement && inputCustomerAddress.value) {
        addressElement.innerHTML = inputCustomerAddress.value.replace(/\n/g, '<br>');
      }
      
      // Add to container
      pdfContainer.appendChild(invoiceContent);
      
      // Hide it offscreen
      pdfContainer.style.position = 'fixed';
      pdfContainer.style.left = '-9999px';
      pdfContainer.style.top = '0';
      
      // Add to body for rendering
      document.body.appendChild(pdfContainer);
      
      return pdfContainer;
    }

    // Download functions
    async function downloadPNG() {
      showStatus('Generating PNG...');
      
      try {
        // Create a clean copy of the invoice for downloading
        const pdfContainer = createPdfInvoice();
        
        // Create the image and download
        const canvas = await html2canvas(pdfContainer, { 
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#ffffff'
        });
        
        const link = document.createElement('a');
        link.download = 'invoice.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
        
        // Clean up
        document.body.removeChild(pdfContainer);
        
        showStatus('PNG downloaded successfully!');
      } catch (error) {
        console.error('Error generating PNG:', error);
        showStatus('Error generating PNG. Please try again.');
      }
    }

    // This function helps calculate text width for centering
    function getTextWidth(text, fontSize, fontName) {
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');
      context.font = fontSize + ' ' + fontName;
      return context.measureText(text).width;
    }

    async function downloadPDF() {
      showStatus('Generating PDF...');
      
      try {
        // Create a properly formatted invoice
        const pdfContainer = createPdfInvoice();
        
        // Get the invoice element directly from the container
        const invoiceEl = pdfContainer.firstChild;
        
        // Create PDF using canvas as intermediary
        const canvas = await html2canvas(invoiceEl, { 
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#ffffff'
        });
        
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF({
          orientation: 'portrait',
          unit: 'mm',
          format: 'a4'
        });
        
        // Calculate proportions to fit onto A4
        const imgWidth = 210; // A4 width in mm
        const imgHeight = (canvas.height * imgWidth) / canvas.width;
        
        pdf.addImage(
          canvas.toDataURL('image/jpeg', 1.0), 
          'JPEG', 
          0, 0, 
          imgWidth, imgHeight
        );
        
        // Get the dollaweb-branding div for positioning reference
        const brandingDiv = invoiceEl.querySelector('.dollaweb-branding');
        
        // Calculate the relative position of the branding div
        const brandingPosition = brandingDiv.getBoundingClientRect();
        const invoicePosition = invoiceEl.getBoundingClientRect();
        
        const relativeTop = (brandingPosition.top - invoicePosition.top) / invoicePosition.height;
        
        // Calculate PDF coordinates
        const linkY = relativeTop * imgHeight + 5; // Add a small offset to center on the text
        
        // Calculate the width of the PDF page
        const pageWidth = pdf.internal.pageSize.getWidth();
        
        // Add an invisible clickable link over the "The Dollar Web" text area
        // We don't add visible text, but instead create a clickable area over the existing rendered text
        pdf.link(
          pageWidth / 2 - 50, // X position (centered, with offset)
          linkY - 5,          // Y position (slightly above text)
          100,                // Width of clickable area
          10,                 // Height of clickable area
          { url: 'https://thedollarweb.com' }
        );
        
        pdf.save('invoice.pdf');
        
        // Clean up
        document.body.removeChild(pdfContainer);
        
        showStatus('PDF downloaded successfully!');
      } catch (error) {
        console.error('Error generating PDF:', error);
        showStatus('Error generating PDF. Please try again.');
      }
    }

    // Wait until DOM is fully loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Tab navigation functionality
      const tabButtons = document.querySelectorAll('.tab-btn');
      const formPanels = document.querySelectorAll('.form-panel');

      // Function to activate a tab
      function activateTab(tabId) {
        // Deactivate all tabs and panels
        tabButtons.forEach(btn => btn.classList.remove('active'));
        formPanels.forEach(panel => panel.classList.remove('active'));
        
        // Activate the selected tab and panel
        const selectedTab = document.querySelector(`[data-tab="${tabId}"]`);
        const selectedPanel = document.getElementById(`${tabId}-panel`);
        
        if (selectedTab) selectedTab.classList.add('active');
        if (selectedPanel) selectedPanel.classList.add('active');
      }

      // Add click event listeners to tab buttons
      tabButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          activateTab(this.getAttribute('data-tab'));
        });
      });
      
      // Make sure the first tab is active initially
      activateTab('company-details');
    });

    // Load the logo when the page loads (add this to your initialization code)
    document.addEventListener('DOMContentLoaded', function() {
      // Load saved logo if available
      loadLogoFromLocalStorage();

      // Load saved company details if available
      loadCompanyDetailsFromLocalStorage();
    });

    // Wire up
    $('.add-row').onclick = () => { 
      addLine('', '0.00');
      updateInvoiceNumber();
    };
    $('#btn-png').onclick = downloadPNG;
    $('#btn-pdf').onclick = downloadPDF;

    // Initialize invoice number
    updateInvoiceNumber();
    
    // Hide customer info section initially
    customerInfo.style.display = 'none';

    // Seed a few sample lines
    addLine('Web Design Services', '1500.00');
    addLine('Hosting (12 months)', '240.00');
    initializeLayout();

    // Function to save logo to localStorage
    function saveLogoToLocalStorage(logoDataUrl) {
      try {
        localStorage.setItem('userLogo', logoDataUrl);
        console.log('Logo saved to localStorage');
      } catch (error) {
        console.error('Error saving logo to localStorage:', error);
        // If localStorage is full, show a friendly message
        if (error.name === 'QuotaExceededError' || error.code === 22) {
          showStatus('Storage limit reached. Try using a smaller logo image.', 5000);
        }
      }
    }

    // Function to load logo from localStorage
    function loadLogoFromLocalStorage() {
      try {
        const savedLogo = localStorage.getItem('userLogo');
        if (savedLogo) {
          logoDrop.style.backgroundImage = `url(${savedLogo})`;
          logoDrop.textContent = '';
          hasLogo = true;
          console.log('Logo loaded from localStorage');
        }
      } catch (error) {
        console.error('Error loading logo from localStorage:', error);
      }
    }

    // Function to clear logo from localStorage
    function clearLogo() {
      try {
        localStorage.removeItem('userLogo');
        logoDrop.style.backgroundImage = '';
        logoDrop.textContent = 'Drop Logo Here';
        hasLogo = false;
        showStatus('Logo cleared successfully!');
        console.log('Logo cleared from localStorage');
      } catch (error) {
        console.error('Error clearing logo from localStorage:', error);
      }
    }

    // Function to save company details to localStorage
    function saveCompanyDetailsToLocalStorage() {
      try {
        const companyDetails = {
          name: inputCompany.value,
          email: inputEmail.value,
          address: inputCompanyAddress.value,
          sequenceNumber: inputSequenceNumber.value
        };
        localStorage.setItem('companyDetails', JSON.stringify(companyDetails));
        console.log('Company details saved to localStorage');
      } catch (error) {
        console.error('Error saving company details to localStorage:', error);
      }
    }

    // Function to load company details from localStorage
    function loadCompanyDetailsFromLocalStorage() {
      try {
        const savedDetails = localStorage.getItem('companyDetails');
        if (savedDetails) {
          const details = JSON.parse(savedDetails);
          
          // Update input fields
          if (details.name) {
            inputCompany.value = details.name;
            previewCompany.textContent = details.name;
          }
          
          if (details.email) {
            inputEmail.value = details.email;
            previewEmail.textContent = details.email;
          }
          
          // Load company address if available
          if (details.address) {
            inputCompanyAddress.value = details.address;
            previewCompanyAddress.innerHTML = details.address.replace(/\n/g, '<br>');
          }
          
          // Load sequence number if available
          if (details.sequenceNumber) {
            inputSequenceNumber.value = details.sequenceNumber;
          }
          
          // Update invoice number based on company name and sequence
          updateInvoiceNumber();
          
          console.log('Company details loaded from localStorage');
        }
      } catch (error) {
        console.error('Error loading company details from localStorage:', error);
      }
    }

    // Initialize the tabs when the script runs
    function initializeTabs() {
      const tabButtons = document.querySelectorAll('.tab-btn');
      const formPanels = document.querySelectorAll('.form-panel');

      function activateTab(tabId) {
        // Deactivate all tabs and panels
        tabButtons.forEach(btn => btn.classList.remove('active'));
        formPanels.forEach(panel => panel.classList.remove('active'));
        
        // Activate the selected tab and panel
        const selectedTab = document.querySelector(`[data-tab="${tabId}"]`);
        const selectedPanel = document.getElementById(`${tabId}-panel`);
        
        if (selectedTab) selectedTab.classList.add('active');
        if (selectedPanel) selectedPanel.classList.add('active');
      }

      // Add click event listeners to tab buttons
      tabButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          activateTab(this.getAttribute('data-tab'));
        });
      });
      
      // Ensure first tab is active
      activateTab('company-details');
    }

    // Run the tab initialization
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeTabs);
    } else {
      initializeTabs();
    }
  </script>



<footer class="site-footer">
  <div class="footer-wave"></div>
  <div class="footer-content">
    <div class="footer-logo">
      <img src="../images/logo.svg" alt="The Dollar Web Logo" style="width: 48px; height: 48px;">
      <span>&nbsp;The Dollar Web</span>
    </div>
    <div class="footer-links">
      <a href="../index.html">Home</a>
      <a href="../about.html">About</a>
      <a href="../contact.html">Contact</a>
      <a href="../privacy.html">Privacy Policy</a>
      <a href="../terms.html">Terms of Service</a>
    </div>
    <div class="footer-social">
      <a href="https://x.com/thedollarweb" aria-label="Twitter">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Z"/>
        </svg>
      </a>
      <a href="https://www.instagram.com/thedollarwebpro/" aria-label="Instagram">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
          <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
          <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
        </svg>
      </a>
      <a href="https://www.linkedin.com/company/the-dollar-web" aria-label="LinkedIn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
          <rect x="2" y="9" width="4" height="12"></rect>
          <circle cx="4" cy="4" r="2"></circle>
        </svg>
      </a>
    </div>
    <p class="copyright">&copy; 2025 The Dollar Web</p>
    <p class="copyright-message">Professional tools that won't break the bank</p>
  </div>
</footer>
</body>
</html>